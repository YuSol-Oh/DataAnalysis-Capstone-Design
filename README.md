# DataAnalysis-Capstone-Design
Users' Preference and Ingredient based Menu Recommendation System, using TF-IDF

## 1. 과제 개요
#### 가. 과제 선정 배경 및 필요성
- 배달 음식의 소비 증가에 따라 일회용 포장 용기와 일회용품의 사용량이 급격하게 증가하였다. 특히 코로나19 장기화로 인해 플라스틱 쓰레기가 급격히 증가하였고, 코로나로 인해 증가한 쓰레기를 칭하는 ‘코로나 트래쉬(Trash)’라는 신조어까지 생겼다. 재활용이 불가능한 쓰레기의 증가로 인해, 환경오염 문제도 더욱 심각해졌다.
- 또한, 코로나19로 인해 배달 서비스들이 더욱 좋아짐에 따라, 소비자들이 인스턴트 음식들을 많이, 그리고 자주 먹을 수 있는 환경이 만들어졌다. 이로 인해 소비자들의 건강에도 우려가 가능 상황이다.
- 이러한 상황의 개선을 위해, ‘집에 가지고 있는 재료들로 쉽게 할 수 있으면서, 자신이 좋아하는 음식 취향이 반영된 메뉴와 요리 방법’을 알려주고자 한다. 따라서 ‘개인의 음식 취향 및 사용하고자 하는 재료 기반 메뉴 추천’이라는 주제를 프로젝트의 주제로 선정하게 되었다. 이를 통해, 배달 음식에 대한 소비를 줄여 일회용품의 사용량을 줄이고, 소비자가 조금 더 건강한 식생활을 할 수 있도록 유도하고자 한다. 

#### 나. 과제 주요내용
과제는 다음의 큰 네 단계로 진행될 예정이다.

  > ① 데이터 확보  ② 데이터 전처리 ③ 추천시스템 모델 구현 ④ 추천시스템 평가 및 보완
  
 ① 다양한 레시피를 제공할 수 있도록 최대한 많은 데이터를 확보한 뒤, ② 정확한 추천 시스템 구현을 위해 데이터 전처리를 여러 과정에 걸쳐 진행한다. 그 후, ③ 사용자의 취향에 맞고, 사용자가 입력한 재료 조건을 잘 만족하는 메뉴 추천을 위해, 전체 메뉴 풀을 세 단계에 걸쳐 필터링 한 뒤, 추천하는 모델을 구현한다. 마지막으로, ④ 여러 지표들을 통해서 추천 시스템을 평가하고, 평가 결과를 참고하여 모델의 추천 정확도를 높이기 위한 보완을 진행한다.

#### 다. 최종결과물의 목표
- 사용자는 서비스 이용 시, ‘음식의 대분류’와 ‘대분류 속 대표 메뉴’를 선택하는 과정을 통해 자신의 음식 취향을 반영하게 되고, ‘가지고 있는 재료’의 입력을 통해 자신이 당장 요리할 수 있는 메뉴를 추천받게 된다. 추천 시스템을 통해서 사용자가 추천 받은 메뉴가, 사용자 입장에서 공감되고 납득 가능하도록 하는 것이 최종 결과물의 주목표이다. 또한, 추천시스템 성능 평가 지표를 사용하여, 모델의 추천 성능이 어떠한지를 정량적으로 평가하고자 한다. 평가 과정에서 사용자의 입력 값을 어떻게 받았을 때(재료를 어떻게 입력하고, 몇 개 입력하는지 등)에 모델의 성능이 가장 좋은지를 알아보고, 최종적으로 입력 변수의 기본 값 수를 결정하고자 한다. 

## 2. 과제 수행 방법
- Google Colab을 이용하여 각 진행 단계에 필요한 파이썬 라이브러리들을 이용
  - EX. BeautifulSoup, Hanspell(spell_checker), Sklearn(TfidfVectorizer, cosine_similarity) …
- Microsoft Office Excel을 이용하여 csv 파일로 저장한 데이터를 분석 및 수정

## 3. 수행 결과
#### 가. 과제수행 결과
아래의 1~5 순서에 따라 과제를 수행하였다.
  > 1. 시스템의 전체적인 프로세스 설계
  > 2. 데이터 확보
  > 3. 데이터 전처리
  > 4. TF-IDF를 통한 메뉴 간의 유사도 구하기
  > 5. Intra-list SImilarity와 Personalization 지표를 이용한 추천 시스템 성능 평가

과제 수행 결과물로, 사용자가 선호하는 음식의 대분류와 대표메뉴, 사용하고자 하는 재료를 입력한 경우에 사용자의 취향과 조건에 맞는 10가지 메뉴와 레시피를 추천해주는 추천 시스템을 완성하였다. 완성된 추천 시스템의 사용 예시는 다음과 같다.

![결과물 예시](https://user-images.githubusercontent.com/77186075/220614863-3d071860-aec7-4b01-9711-7ca76728d267.png)

#### 나. 최종결과물 주요특징 및 설명
최종 결과물의 추천 성능을 정확도를 보기 위해, ‘Intra-list Similarity’와 ‘Personalization’의 성능 지표를 이용하여 평가를 해보았다. 각 지표의 사용 목적은 다음과 같다.

> ① **Intra-list Similarity** : 여러 사용자의 모든 추천 메뉴들 간의 평균 코사인 유사도를 구하여, 추천 시스템이 얼마나 비슷한 성격의 메뉴들을 잘 추천하는지를 평가하기 위함. 
	(한 사용자에게 성격이 많이 다른 메뉴들이 추천된 경우, 추천 시스템의 성능이 좋지 않은 것이라고 판단하였음. 즉, Intra-list Similarity 값이 높다면, 추천 시스템이 각 사용자에게 매우 비슷한 성격의 메뉴들을 잘 추천해주고 있음을 의미.)

> ② **Personalization** : 추천 시스템이 사용자의 취향을 얼마나 반영하는지를 평가하기 위해, 사용자들의 추천 메뉴 리스트들 간의 dissimilarity를 비교하기 휘함.
	(Personalization 값이 높으면 추천 시스템이 각 사용자의 취향을 잘 반영하고 있음을 의미.)

① **Intra-list Similarity를 이용한 평가 결과**
- 동일한 음식의 대분류 내에서 동일한 대표메뉴를 선택한 사용자가 재료를 입력할 때에, 입력한 주재료와 보조재료(ex. 양념)의 비율에 따른 ‘intra-list similarity’ 값을 계산해 평가를 진행
- 주재료의 비율을 높게 입력하였을 때가 보조 재료의 비율을 높게 입력 했을 때에 비해, 비슷한 성격의 메뉴들을 더 정확하게 추천해 줄 것이라고 가정하였음
- 실제로 8개의 대분류에 대해서 평가를 진행했을 때에, 다음과 같이 ‘주재료의 비율이 높은 경우’에 ‘Intra-list similarity’의 값도 높게 나왔다.

![image](https://user-images.githubusercontent.com/77186075/220616315-ad0bc6db-b91a-4c15-8246-7af7db392b25.png)

② **Personalization을 이용한 평가 결과**
- 동일한 음식의 대분류 내에서 동일한 재료를 입력했을 때, 사용자가 선택한 대표 메뉴에 따라 추천되는 결과가 어떻게 다른지를 비교하여 평가를 진행
- 추천 시스템이 개인의 취향을 잘 반영하는지를 보기 위해, 사용자들이 선택한 대표 메뉴가 2개 겹칠 때, 1개 겹칠 때, 아예 겹치지 않을 때로 나눠서 계산 결과를 관찰함
- 실제로 여러 번 시행을 해본 결과, 사용자들 간에 겹치는 대표메뉴가 없었을 때, 즉, 사용자들의 취향을 모두 다르게 입력하였을 때에 personalization 값이 높게 나왔다. 

![성능평가 결과_1](https://user-images.githubusercontent.com/77186075/220616888-fadfd92e-1cdb-42f9-bc9a-5e3a09bebb1d.png)

→  ①과 ②의 결과를 통해, 최종 결과물인 추천 시스템이, **각 사용자에게 일관성 있는 메뉴를 추천**하며, **개인의 취향 또한 잘 반영**하고 있음을 정량적으로 검증되었다.

## 4. 기대효과 및 활용방안
#### 가. 기대효과
- 개인 선호도 기반 맞춤형 레시피 추천 시스템을 활용하면, 서비스 이용자들은 보유하고 있는 식재료를 최대한 활용함으로써 배출되는 음식물 쓰레기량을 효과적으로 감소시킬 수 있을 뿐만 아니라 배달음식의 소비량을 감소시킴으로써 결과적으로는 일회용품 소비량을 줄여, 환경 개선에 영향을 미칠 수 있다. 
- 또한, 서비스 이용자들은 가지고 있는 식재료를 활용해 어떤 요리를 할지 고민하고 레시피를 검색하는 등의 노력을 줄일 수 있다는 장점이 있다. 

#### 나. 활용방안
- 이를 활용하면 가지고 있는 식재료를 최대한 활용하는 것도 가능하지만, 선택한 레시피에 대해 필요한 식재료를 효과적으로 파악할 수 있어서 식재료 구매 시에 효율적이게 된다. 
- 또한, 제공되는 요리에 대한 칼로리, 영양성분 등의 정보를 추가하여 시스템을 보완한다면, 이를 활용해 균형 잡힌 식사를 유도하거나 다이어트에 식단 보조 프로그램으로도 이용 가능할 것이다.
- 이와 같이, 현재의 ‘사용자 취향 기반 및 사용하고자 하는 재료 기반’ 메뉴 추천 시스템에, 메뉴와 재료, 레시피에 대한 다양한 메타데이터를 추가하여 시스템을 목적에 맞게 구체화하고 발전시킨다면, 다양한 목적을 충족시키는 시스템으로 변형하여 사용이 가능하다.

## 5. 결론 및 제언

-  코로나19로 인해 배달 음식과 인스턴트식품의 수요가 증가하였고, 여기서 배출되는 쓰레기들과 인스턴트식품의 좋지 않은 재료들이 환경과 소비자들의 건강에 나쁜 영향을 미치고 있다. 이러한 상황을 조금이나마 개선시킬 수 있는 프로젝트를 하고 싶어, ‘사용자의 취향과 사용하고자 하는 재료 기반 메뉴 추천 시스템’을 만들게 되었다. TF-IDF를 활용하여 메뉴 데이터들을 여러 단계를 통해 선별하였고, 최종적으로 10개의 메뉴를 추천해주는 형식으로 추천 시스템을 구현하였다. 
- 프로젝트를 진행하며, 프로젝트에 적합한 데이터를 구하지 못하거나 데이터 전처리에서 기술적으로 해결하지 못한 부분에 있어서 아쉬움이 남는다. 프로젝트 계획 초반에 확보하고자 했던 사용자 데이터를 추후에 이용할 수 있게 된다면, 사용자 데이터와 지금의 추천 모델을 결합하여, 단순 ‘TF-IDF’를 통한 추천이 아닌 머신 러닝을 통한 추천 시스템을 구현하는 프로젝트를 진행해보고자 한다.
